# GSAP ローディングアニメーション実装ガイド

## 概要

GSAP ライブラリを使用してページ遷移時のローディングアニメーションを実装しました。

## 実装内容

### 1. 追加ファイル

- `js/loading-animation.js` - ローディングアニメーション用 JavaScript
- GSAP ローディング用 CSS（style.css に追加）

### 2. 機能詳細

#### 自動発動条件

- **リンククリック時**: 内部リンクをクリックした際に自動表示
- **フォーム送信時**: フォーム送信時に自動表示
- **ページ読み込み時**: 初回読み込み時に表示し、画像読み込み完了で非表示

#### 除外条件

以下のリンクは自動ローディング表示されません：

- アンカーリンク（#で始まる URL）
- メールリンク（mailto:）
- 電話リンク（tel:）
- 外部サイトリンク（target="\_blank"）
- `.no-loading`クラスが付いた要素

#### アニメーション詳細

1. **フェードイン**: 0.3 秒でローディング画面表示
2. **ロゴアニメーション**: 0.6 秒でロゴがフェードイン
3. **スピナー**: 3 つのリングが回転するアニメーション
4. **テキスト**: "Loading..."テキストが 0.4 秒でフェードイン
5. **フェードアウト**: 0.5 秒でローディング画面非表示

## カスタマイズ方法

### ロゴの変更

`loading-animation.js`の 28 行目でロゴパスを変更：

```javascript
<img
  src="${window.location.origin}/wp-content/themes/cocoon-child-master/images/logo.svg"
  alt="Loading..."
/>
```

### 色の変更

`style.css`のスピナー色を変更：

```css
.spinner-ring:nth-child(1) {
  border-top: 3px solid #ff6b35; /* メインカラー */
}
```

### 表示時間の調整

最小表示時間を変更（現在 800ms）：

```javascript
setTimeout(hideLoader, 800); // ミリ秒で指定
```

### 特定要素の除外

ローディングを表示したくない要素に`no-loading`クラスを追加：

```html
<a href="/page/" class="no-loading">ローディングなしリンク</a>
<form class="no-loading">ローディングなしフォーム</form>
```

## トラブルシューティング

### ローディングが表示されない場合

1. GSAP ライブラリが正しく読み込まれているか確認
2. JavaScript エラーがないかブラウザのコンソールを確認
3. WordPress の jQuery が正しく動作しているか確認

### アニメーションが重い場合

1. `backdrop-filter`を削除（style.css 26 行目）
2. スピナーの数を減らす
3. アニメーション時間を短縮

## 備考

- レスポンシブ対応済み
- ブラウザの戻る・進むボタンに対応
- 画像読み込み完了を監視して UX 向上
- 最小表示時間でチラつき防止
